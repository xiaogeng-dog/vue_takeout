(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50c8a264"],{2591:function(t,o,s){},"2d1a":function(t,o,s){"use strict";s("74b3")},"38bd":function(t,o,s){"use strict";s("2591")},"4e7c":function(t,o,s){},6199:function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"goods"},[s("div",{staticClass:"menu-wrapper"},[s("ul",t._l(t.goods,(function(o,i){return s("li",{key:i,staticClass:"menu-item",class:{current:i===t.currentIndex},on:{click:function(o){return t.clickMenuItem(i)}}},[s("span",{staticClass:"text bottom-border-1px"},[o.icon?s("img",{staticClass:"icon",attrs:{src:o.icon}}):t._e(),t._v(" "+t._s(o.name)+" ")])])})),0)]),s("div",{staticClass:"foods-wrapper"},[s("ul",{ref:"foodsUl"},t._l(t.goods,(function(o,i){return s("li",{key:i,staticClass:"food-list-hook"},[s("h1",{staticClass:"title"},[t._v(t._s(o.name))]),s("ul",t._l(o.foods,(function(o,i){return s("li",{key:i,staticClass:"food-item bottom-border-1px",on:{click:function(s){return t.showFood(o)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"57",height:"57",src:o.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(o.name))]),s("p",{staticClass:"desc"},[t._v(t._s(o.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(o.sellCount)+"份")]),s("span",[t._v("好评率"+t._s(o.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(o.price))]),o.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(o.oldPrice))]):t._e()]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])])})),0)])})),0)]),s("shop-cart")],1),s("Food",{ref:"food",attrs:{food:t.food}})],1)},a=[],n=s("5530"),c=(s("c740"),s("159b"),s("fb6a"),s("2f62")),e=s("f40f"),r=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[t.food.count?s("div",{staticClass:"iconfont icon-remove_circle_outline",on:{click:function(o){return o.stopPropagation(),t.updateFoodCounts(!1)}}}):t._e()]),t.food.count?s("div",{staticClass:"cart-count"},[t._v(t._s(t.food.count))]):t._e(),s("div",{staticClass:"iconfont icon-add_circle",on:{click:function(o){return o.stopPropagation(),t.updateFoodCounts(!0)}}})],1)},l=[],d={name:"cartcontrol",props:{food:Object},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["updateFoodCount"])),{},{updateFoodCounts:function(t){this.updateFoodCount({isAdd:t,food:this.food})}})},u=d,f=(s("e77e"),s("2877")),h=Object(f["a"])(u,r,l,!1,null,null,null),p=h.exports,v=function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"food-content"},[s("div",{staticClass:"image-header"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),s("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),s("div",{staticClass:"back",on:{click:t.toggleShow}},[s("i",{staticClass:"iconfont icon-arrow_left"})])]),s("div",{staticClass:"content"},[s("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),s("div",{staticClass:"detail"},[s("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),s("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:t.food}})],1)])]),s("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()},C=[],_={name:"food",props:{food:Object},data:function(){return{isShow:!1}},methods:{toggleShow:function(){this.isShow=!this.isShow}},components:{CartControl:p}},m=_,w=(s("2d1a"),Object(f["a"])(m,v,C,!1,null,"33142028",null)),g=w.exports,b=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-left",on:{click:t.toggleShow}},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount}},[s("i",{staticClass:"iconfont icon-shopping_cart",class:{highlight:t.totalCount}})]),t.totalCount?s("div",{staticClass:"num"},[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"price",class:{highlight:t.totalCount}},[t._v(" ￥"+t._s(t.totalPrice)+" ")]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.info.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.payClass},[t._v(" "+t._s(t.payText)+" ")])])]),s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.clearCart}},[t._v("清空")])]),s("div",{staticClass:"list-content"},[s("ul",t._l(t.cartFoods,(function(o,i){return s("li",{key:i,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(o.name))]),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(o.price))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])})),0)])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])},S=[],x=s("76a0"),y={name:"ShopCart",data:function(){return{isShow:!1}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(c["d"])(["cartFoods","info"])),Object(c["c"])(["totalCount","totalPrice"])),{},{payClass:function(){var t=this.totalPrice,o=this.info.minPrice;return t>=o?"enough":"not-enough"},payText:function(){var t=this.totalPrice,o=this.info.minPrice;return 0===t?"￥".concat(o,"元起送"):t<o?"还差￥".concat(o-t,"元起送"):"结算"},listShow:function(){var t=this;return 0===this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new e["a"](".list-content",{click:!0})})),this.isShow)}}),methods:{toggleShow:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;x["MessageBox"].confirm("确定清空购物车吗?").then((function(o){t.$store.dispatch("clearCart")}),(function(){}))}},components:{CartControl:p}},k=y,j=(s("efa5"),Object(f["a"])(k,b,S,!1,null,"3b0d4fe8",null)),O=j.exports,P={name:"ShopGoods",components:{CartControl:p,Food:g,ShopCart:O},data:function(){return{scrollY:0,tops:[0],food:{}}},mounted:function(){var t=this;this.getShopGoods((function(){t.$nextTick((function(){t._initScroll(),t._initTops()}))}))},computed:Object(n["a"])(Object(n["a"])({},Object(c["d"])(["goods"])),{},{currentIndex:function(){var t=this,o=this.tops.findIndex((function(o,s){return t.scrollY>=o&&t.scrollY<t.tops[s+1]}));return o}}),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["getShopGoods"])),{},{_initScroll:function(){var t=this;this.foodsScroll=new e["a"](".foods-wrapper",{probeType:2}),this.foodsScroll.on("scroll",(function(o){o.x;var s=o.y;t.scrollY=Math.abs(s)})),this.foodsScroll.on("scrollEnd",(function(o){o.x;var s=o.y;t.scrollY=Math.abs(s)})),new e["a"](".menu-wrapper",{click:!0})},_initTops:function(){var t=this,o=0,s=this.$refs.foodsUl.children;Array.prototype.slice.call(s).forEach((function(s){o+=s.clientHeight,t.tops.push(o)}))},clickMenuItem:function(t){this.scrollY=this.tops[t],this.foodsScroll.scrollTo(0,-this.tops[t],300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}})},F=P,$=(s("38bd"),Object(f["a"])(F,i,a,!1,null,null,null));o["default"]=$.exports},"74b3":function(t,o,s){},c740:function(t,o,s){"use strict";var i=s("23e7"),a=s("b727").findIndex,n=s("44d2"),c="findIndex",e=!0;c in[]&&Array(1)[c]((function(){e=!1})),i({target:"Array",proto:!0,forced:e},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},e5e9:function(t,o,s){},e77e:function(t,o,s){"use strict";s("e5e9")},efa5:function(t,o,s){"use strict";s("4e7c")},fb6a:function(t,o,s){"use strict";var i=s("23e7"),a=s("861d"),n=s("e8b5"),c=s("23cb"),e=s("50c4"),r=s("fc6a"),l=s("8418"),d=s("b622"),u=s("1dde"),f=u("slice"),h=d("species"),p=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(t,o){var s,i,d,u=r(this),f=e(u.length),C=c(t,f),_=c(void 0===o?f:o,f);if(n(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?a(s)&&(s=s[h],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(u,C,_);for(i=new(void 0===s?Array:s)(v(_-C,0)),d=0;C<_;C++,d++)C in u&&l(i,d,u[C]);return i.length=d,i}})}}]);