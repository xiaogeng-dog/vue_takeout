(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64b138f0"],{"2d4f":function(e,t,a){"use strict";a("ab7e")},7101:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"loginContainer"},[a("div",{staticClass:"loginInner"},[a("div",{staticClass:"login_header"},[a("h2",{staticClass:"login_logo"},[e._v("硅谷外卖")]),a("div",{staticClass:"login_header_title"},[a("a",{class:{on:e.loginWay},attrs:{href:"javascript:;"},on:{click:function(t){e.loginWay=!0}}},[e._v("短信登录")]),a("a",{class:{on:!e.loginWay},attrs:{href:"javascript:;"},on:{click:function(t){e.loginWay=!1}}},[e._v("密码登录")])])]),a("div",{staticClass:"login_content"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[a("div",{class:{on:e.loginWay}},[a("section",{staticClass:"login_message"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",maxlength:"11",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),a("button",{staticClass:"get_verification",class:{right_phone:e.checkPhone},attrs:{disabled:!e.checkPhone},on:{click:function(t){return t.preventDefault(),e.getCode.apply(null,arguments)}}},[e._v(" "+e._s(e.checkTime?"已发送"+e.checkTime+"s":"获取验证码")+" ")])]),a("section",{staticClass:"login_verification"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"tel",maxlength:"8",placeholder:"验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),e._m(0)]),a("div",{class:{on:!e.loginWay}},[a("section",[a("section",{staticClass:"login_message"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",maxlength:"11",placeholder:"手机/邮箱/用户名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),a("section",{staticClass:"login_verification"},[e.showPwd?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"text",maxlength:"8",placeholder:"密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"password",maxlength:"8",placeholder:"密码"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}}),a("div",{staticClass:"switch_button",class:e.showPwd?"on":"off",on:{click:function(t){e.showPwd=!e.showPwd}}},[a("div",{staticClass:"switch_circle",class:{right:e.showPwd}}),a("span",{staticClass:"switch_text"},[e._v(e._s(e.showPwd?"abc":"..."))])])]),a("section",{staticClass:"login_message"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],attrs:{type:"text",maxlength:"11",placeholder:"验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}}),a("img",{ref:"captcha",staticClass:"get_verification",attrs:{src:"http://localhost:4000/captcha",alt:"captcha"},on:{click:e.getCaptcha}})])])]),a("button",{staticClass:"login_submit"},[e._v("登录")])]),a("a",{staticClass:"about_us",attrs:{href:"javascript:;"}},[e._v("关于我们")])]),a("a",{staticClass:"go_back",attrs:{href:"javascript:"},on:{click:function(t){return e.$router.back()}}},[a("i",{staticClass:"iconfont icon-jiantou2"})])]),a("alert-tip",{directives:[{name:"show",rawName:"v-show",value:e.showAlert,expression:"showAlert"}],attrs:{alertText:e.alertText},on:{closeTip:e.closeTip}})],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login_hint"},[e._v(" 温馨提示：未注册硅谷外卖帐号的手机号，登录时将自动注册，且代表已同意 "),a("a",{attrs:{href:"javascript:;"}},[e._v("《用户服务协议》")])])}],c=a("1da1"),r=(a("b0c0"),a("ac1f"),a("5319"),a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert_container"},[a("section",{staticClass:"tip_text_container"},[e._m(0),a("p",{staticClass:"tip_text"},[e._v(e._s(e.alertText))]),a("div",{staticClass:"confrim",on:{click:e.closeTip}},[e._v("确认")])])])}),i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip_icon"},[a("span"),a("span")])}],o={props:{alertText:String},methods:{closeTip:function(){this.$emit("closeTip")}}},l=o,p=(a("8c0b"),a("2877")),u=Object(p["a"])(l,r,i,!1,null,"6d34e52c",null),h=u.exports,d=a("365c");"function"===typeof TextDecoder&&new TextDecoder,"function"===typeof TextEncoder&&new TextEncoder;const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=Array.prototype.slice.call(m);(e=>{let t={};e.forEach((e,a)=>t[e]=a)})(v),String.fromCharCode.bind(String),"function"===typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array);var f={components:{AlertTip:h},name:"Login",data:function(){return{loginWay:!0,phone:"",checkTime:0,code:"",showPwd:!1,pwd:"",name:"",captcha:"",alertText:"",showAlert:!1,intervalId:0}},computed:{checkPhone:function(){var e=/^1\d{10}$/;return e.test(this.phone)}},methods:{getCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.checkTime){t.next=2;break}return t.abrupt("return");case 2:return e.checkTime=60,e.intervalId=setInterval((function(){e.checkTime--,e.checkTime<=0&&clearInterval(e.intervalId)}),1e3),t.next=6,Object(d["h"])(e.phone);case 6:a=t.sent,1===a.code&&(e.showAlerts(a.msg),e.checkTime&&(e.checkTime=0,clearInterval(e.intervalId),e.intervalId=void 0));case 8:case"end":return t.stop()}}),t)})))()},showAlerts:function(e){this.showAlert=!0,this.alertText=e},login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loginWay){t.next=14;break}if(e.checkPhone){t.next=6;break}return e.showAlerts("手机号不正确"),t.abrupt("return");case 6:if(/^\d{6}$/.test(e.code)){t.next=9;break}return e.showAlerts("验证码必须是六位数字"),t.abrupt("return");case 9:return t.next=11,Object(d["g"])(e.phone,e.code);case 11:a=t.sent,t.next=30;break;case 14:if(e.name){t.next=19;break}return e.showAlerts("用户名不能为空"),t.abrupt("return");case 19:if(e.pwd){t.next=24;break}return e.showAlerts("密码不能为空"),t.abrupt("return");case 24:if(e.captcha){t.next=27;break}return e.showAlerts("验证码不能为空"),t.abrupt("return");case 27:return t.next=29,Object(d["f"])({name:e.name,pwd:e.pwd,captcha:e.captcha});case 29:a=t.sent;case 30:e.checkTime&&(e.checkTime=0,clearInterval(e.intervalId),e.intervalId=void 0),0===a.code?(n=a.data,e.$store.dispatch("recordUser",n),e.$router.replace("/profile")):(e.showAlerts(a.msg),e.getCaptcha());case 32:case"end":return t.stop()}}),t)})))()},closeTip:function(){this.showAlert=!1,this.alertText=""},getCaptcha:function(){this.$refs.captcha.src="http://localhost:4000/captcha?time="+Date.now()}}},g=f,w=(a("2d4f"),Object(p["a"])(g,n,s,!1,null,"3edbdf22",null));t["default"]=w.exports},"8c0b":function(e,t,a){"use strict";a("c648")},ab7e:function(e,t,a){},c648:function(e,t,a){}}]);